Bootstrap: docker
From: pytorch/pytorch:2.2.2-cuda11.8-cudnn8-runtime

%files
    ./lib/__init__.py
    ./lib/pruning_finetune_mitigation.py
    ./lib/pruning_mitigation.py
    ./lib/round21dataset.py
    ./logs /
    ./scratch /
    ./trojai-mitigation-round-framework /
    ./utils /
    ./metaparameters.json /
    ./metaparameters_schema.json /
    ./example_metrics.py /
    ./example_trojai_mitigation.py /
    ./mitigation.def /
    ./output.txt /
    ./requirements.txt /
    ./README.md /

%post
    apt update
    apt install -y git ffmpeg libsm6 libxext6
    pip install -r requirements.txt
    pip install -e /trojai-mitigation-round-framework

%runscript
    echo "Container was created $NOW"
    echo "Arguments received: $*"
    echo $PATH
    exec python3 /example_trojai_mitigation.py "$@"

%labels
    Author UMBC
    Version v0.0.1

%help
    This is a container submitted by UMBC for Round 21.
